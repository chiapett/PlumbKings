<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKWLC - PlumbKings Weight Loss Competition</title>
    
    <!-- Donut Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="favicon-16.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.svg">
    <link rel="mask-icon" href="favicon.svg" color="#D2691E">
    
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ï¿½ PKWLC Dashboard ğŸƒâ€â™‚ï¸</h1>
            <p>PlumbKings "Less Chunky, More Funky" Competition</p>
            <div class="hero-image">
                <img src="image000000.png.jpeg" alt="PlumbKings Challenge" style="max-width: 200px; border-radius: 15px; margin: 15px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            </div>
            <div class="challenge-info">
                <p><strong>ğŸ“… Fat-to-Fit Journey:</strong> August 4, 2025 - November 4, 2025</p>
                <p><strong>ğŸ¯ Mission:</strong> Transform from Dad Bod to Rad Bod!</p>
                <p><strong>ğŸ’ª Goal:</strong> Less belly, more jelly (the good kind)!</p>
                <p><strong>ğŸ† Prize:</strong> Bragging rights & a new belt (smaller size)!</p>
            </div>
        </header>

        <main>
            <!-- Challenge Progress Section -->
            <section class="challenge-progress">
                <h2>ï¿½â¡ï¸ğŸ’ª From Chunky to Hunky Progress</h2>
                <div id="challengeTimeline">
                    <div class="loading">Loading your journey from flab to fab...</div>
                </div>
            </section>
            <!-- Data Entry Section -->
            <section class="data-entry">
                <h2>âš–ï¸ Confession Booth (Weight Check-in)</h2>
                <p class="section-subtitle">Time to face the music... and the scale! ğŸµâš–ï¸</p>
                <form id="weightForm">
                    <div class="form-group">
                        <label for="competitor">Which brave soul dares to step on the scale?</label>
                        <select id="competitor" required>
                            <option value="">Choose your fighter...</option>
                            <!-- Options will be populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="date">Date of reckoning:</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight (lbs) - Be honest, the scale doesn't lie! ğŸ˜…</label>
                        <input type="number" id="weight" step="0.1" min="50" max="500" required>
                    </div>
                    <button type="submit">Submit My Shame (or Glory!) ğŸ¯</button>
                </form>
            </section>

            <!-- Leaderboard Section -->
            <section class="leaderboard">
                <h2>ğŸ† Hall of Fame (or Shame) Leaderboard</h2>
                <p class="section-subtitle">Who's winning the battle against the bulge? ğŸ’ª</p>
                <div id="leaderboardTable">
                    <div class="loading">Calculating who ate the least donuts...</div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts">
                <h2>ğŸ“ˆ Visual Evidence of Your Journey</h2>
                <p class="section-subtitle">Watch the numbers drop (hopefully)! ğŸ“‰</p>
                
                <div class="chart-container">
                    <h3>ğŸ”â¡ï¸ğŸ¥— The Great Shrinkage Timeline</h3>
                    <p class="chart-subtitle">Watch those pounds disappear (we hope)!</p>
                    <div class="chart-wrapper">
                        <canvas id="weightChart"></canvas>
                        <div class="chart-loading" id="weightChartLoading">Calculating donut damage...</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>ğŸ“‰ Percentage of Fatness Lost</h3>
                    <p class="chart-subtitle">The higher the better (unlike your weight)!</p>
                    <div class="chart-wrapper">
                        <canvas id="percentageChart"></canvas>
                        <div class="chart-loading" id="percentageChartLoading">Computing belly reduction...</div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>ğŸ† 2025 PlumbKings "From Flab to Fab" Competition ğŸ†</p>
            <p class="footer-subtitle">Remember: You can't outrun a bad diet... but you can try! ğŸ•ğŸƒâ€â™‚ï¸</p>
        </footer>
    </div>

    <!-- Success/Error Messages -->
    <div id="message" class="message hidden"></div>

    <!-- Weight Submission Success Modal -->
    <div id="weightModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ‰ Weight Submitted Successfully! ğŸ‰</h2>
                <button class="modal-close" onclick="closeWeightModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="celebration-emoji">ğŸ†ğŸŠğŸ’ª</div>
                <p class="modal-message">Great job stepping on the scale!</p>
                <div class="submission-details">
                    <p><strong>Competitor:</strong> <span id="modalCompetitor"></span></p>
                    <p><strong>Date:</strong> <span id="modalDate"></span></p>
                    <p><strong>Weight:</strong> <span id="modalWeight"></span> lbs</p>
                </div>
                <div class="motivational-message">
                    <p class="quote">"Every step counts in your journey from chunky to hunky!"</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" onclick="closeWeightModal()">Keep Going! ğŸ’ª</button>
            </div>
        </div>
    </div>

    <!-- Conditionally load local environment config -->
    <script>
        // Load development utilities for localhost
        if (window.location.hostname === 'localhost' || 
            window.location.hostname === '127.0.0.1' || 
            window.location.protocol === 'file:') {
            document.write('<script src="js/db-utils.js"><\/script>');
        }
    </script>
    
    <script src="js/local-db.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
    <script src="js/charts.js"></script>
</body>
</html>
